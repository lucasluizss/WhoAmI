(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{DMmz:function(t,e,s){"use strict";s.r(e),s.d(e,"AppGameModule",(function(){return I}));var i=s("G7Y8");class r{constructor(t,e){this.word=t,this.status=e}}var o=s("HDdC");class a{constructor(){this.maxProgress=0,this.currentProgress=0}Finished(){this.again=!0,this.word=""}NextWord(){this.word=this.words[Math.floor(Math.random()*this.words.length)],this.words=this.words.filter(t=>t!==this.word)}LoadWords(t){this.words=t||[]}get CanClick(){return void 0!==this.again}get HasWords(){return this.words&&this.words.length>0}Start(){return new o.a(t=>{const e=["Prepare-se!","3","2","1"];let s=e.length;const i=setInterval(()=>{this.word=e.shift(),--s<0&&(clearInterval(i),this.again=!1,t.complete())},1e3)})}PlayByTime(t){return this.currentProgress=this.maxProgress=t,new o.a(t=>{this.NextWord();const e=setInterval(()=>{--this.currentProgress<=0&&(clearInterval(e),t.complete())},1e3)})}PlayByNumberOfWords(t){this.currentProgress=this.maxProgress=t,this.NextWord()}PlayTimeByWord(t,e){return this.currentProgress=this.maxProgress=t,new o.a(t=>{const s=setInterval(()=>{this.HasWords&&this.currentProgress--||(clearInterval(s),this.Finished(),t.complete()),this.NextWord(),t.next(new r(this.word,!1))},e)})}}class n{constructor(){this.score=0,this.ClearHistoric()}IsPlayerAddict(){return this.score===this.category.data.length}SetPlayer(t){this.player=t||"An\xf4nimo"}SetCategory(t){const e=JSON.parse(localStorage.getItem("categories"));this.category=e.find(e=>e.id===t)}IncorrectAnswer(t,e){this.AddHistoric(new r(t,!1)),this.score>0&&e&&this.score--}RightAnswer(t){this.AddHistoric(new r(t,!0)),this.score++}ClearHistoric(){this.score=0,this.historic=new Array}AddHistoric(t){this.historic.push(t)}}class c{constructor(t,e){this.player=t,this.score=e}}var u=s("M4Nl"),h=s("sNC9"),l=s("fXoL"),d=s("tyNb"),m=s("ofXK");const b=["audioSuccess"],g=["audioError"],p=["audioFinalGame"];function f(t,e){if(1&t&&l.Kb(0,"progress",15),2&t){const t=l.Wb();l.Yb("value",t.vm.currentProgress),l.Yb("max",t.vm.maxProgress)}}function v(t,e){1&t&&(l.Mb(0,"div",23),l.Kb(1,"a",24),l.Mb(2,"p"),l.gc(3,"Parab\ufffdns voce e um viciado!"),l.Lb(),l.Lb())}function y(t,e){if(1&t&&(l.Mb(0,"p",16),l.Mb(1,"del"),l.gc(2),l.Lb(),l.Lb()),2&t){const t=l.Wb().$implicit;l.zb(2),l.hc(t.word)}}function w(t,e){if(1&t&&(l.Mb(0,"p",16),l.gc(1),l.Lb()),2&t){const t=l.Wb().$implicit;l.zb(1),l.ic(" ",t.word," ")}}function k(t,e){if(1&t&&(l.Mb(0,"li",25),l.fc(1,y,3,1,"p",26),l.fc(2,w,2,1,"p",26),l.Lb()),2&t){const t=e.$implicit;l.zb(1),l.Xb("ngIf",!t.status),l.zb(1),l.Xb("ngIf",t.status)}}function M(t,e){if(1&t){const t=l.Nb();l.Mb(0,"div"),l.Mb(1,"h4",16),l.Kb(2,"span",17),l.gc(3),l.Kb(4,"span",17),l.Lb(),l.fc(5,v,4,0,"div",18),l.Kb(6,"hr"),l.Mb(7,"div",19),l.Mb(8,"ul",20),l.fc(9,k,3,2,"li",21),l.Lb(),l.Lb(),l.Kb(10,"hr"),l.Mb(11,"button",22),l.Ub("click",(function(){return l.cc(t),l.Wb().play()})),l.gc(12," JOGAR NOVAMENTE "),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.zb(3),l.jc(" ",t.game.player," fez ",t.game.score," ponto(s) "),l.zb(2),l.Xb("ngIf",t.vm.isPlayerAddict),l.zb(4),l.Xb("ngForOf",t.game.historic)}}const P=function(){return["/home"]},W=[{path:"",component:(()=>{class t{constructor(t){this.activatedRoute=t,this.game=new n,this.vm=new a}ngOnInit(){this.settings=new u.a,this.activatedRoute.queryParams.subscribe(t=>{this.game.SetCategory(+t.id)}),this.whoIsPlaying()}get secoundsOfGame(){return Math.round(this.settings.modeByTime.time/1e3*100)/100}whoIsPlaying(){UIkit.modal.prompt("Digite seu nome:","").then(t=>{this.game.SetPlayer(t),this.notificate("Vamos jogar "+this.game.player),this.play()})}play(){this.audioFinalGame.nativeElement.pause(),this.game.ClearHistoric(),this.vm.LoadWords(this.game.category.data);const t=this;this.vm.Start().subscribe({complete(){t.callGameByMode()}})}callGameByMode(){const t=this;switch(this.settings.gameMode){case h.a.ModeByTime:this.vm.PlayByTime(this.secoundsOfGame).subscribe({complete(){t.saveScoreResult()}});break;case h.a.ModeNumberOfWords:this.vm.PlayByNumberOfWords(this.settings.modeNumberOfWords.numberOfWords);break;case h.a.ModeTimeByWord:this.playTimePerWords();break;default:this.notificate("Este modo de jogo nao existe!",10)}}playTimePerWords(){const t=this;this.vm.PlayTimeByWord(this.settings.modeTimeByWord.numberOfWords,+this.settings.modeTimeByWord.time).subscribe({next(e){t.game.AddHistoric(e)},complete(){t.computeResult()}})}rightAnswer(){this.audioSuccess.nativeElement.play(),this.notificate("Acertou!",.8),this.game.RightAnswer(this.vm.word)}incorrectAnswer(){this.audioError.nativeElement.play(),this.notificate("Errou!",.8),this.game.IncorrectAnswer(this.vm.word,this.settings.losePointsWhenWrong)}computeResult(){UIkit.modal.prompt("Pontua\ufffd\ufffdo:","").then(t=>{this.game.score=+t||0,this.saveScoreResult()})}saveScoreResult(){this.audioFinalGame.nativeElement.play(),this.vm.isPlayerAddict=this.game.IsPlayerAddict(),i.a.AddResult(new c(this.game.player,this.game.score)),this.vm.Finished()}notificate(t,e=3){UIkit.notification({message:t,status:"primary",pos:"bottom-center",timeout:1e3*e})}handleOrientation(t){const e=t.alpha,s=t.beta,i=t.gamma;this.notificate("Absolute: "+t.absolute,10),this.notificate("Alpha: "+e,10),this.notificate("Beta: "+s,10),this.notificate("Gamma: "+i,10)}handleMotionEvent(t){const e=t.accelerationIncludingGravity.y,s=t.accelerationIncludingGravity.z;this.notificate(""+t.accelerationIncludingGravity.x),this.notificate(""+e),this.notificate(""+s)}onClick(t){const e=t.target,s=e.offsetWidth,i=t.clientX-e.getBoundingClientRect().left;this.vm.CanClick&&this.settings.gameMode!==h.a.ModeTimeByWord&&(!this.vm.HasWords||this.vm.currentProgress<=0?this.saveScoreResult():(s/2>i?this.rightAnswer():this.incorrectAnswer(),this.vm.NextWord()))}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(d.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-game"]],viewQuery:function(t,e){var s;1&t&&(l.kc(b,!0),l.kc(g,!0),l.kc(p,!0)),2&t&&(l.bc(s=l.Vb())&&(e.audioSuccess=s.first),l.bc(s=l.Vb())&&(e.audioError=s.first),l.bc(s=l.Vb())&&(e.audioFinalGame=s.first))},decls:21,vars:5,consts:[["data-src","../../../assets/images/others/cover.jpg","uk-img","",1,"uk-height-viewport","uk-flex","uk-flex-center","uk-flex-middle","uk-background-cover","uk-ligth",3,"click"],[1,"uk-overlay","uk-ligth","uk-position-top-right"],[3,"routerLink"],["uk-icon","sign-out"],[1,"uk-margin"],[1,"uk-text-white-80"],["class","uk-progress",3,"value","max",4,"ngIf"],[4,"ngIf"],["audioSuccess",""],["src","../../../assets/audios/success_answer.mp3","type","audio/mp3"],["audioError",""],["src","../../../assets/audios/wrong_answer.mp3","type","audio/mp3"],["loop",""],["audioFinalGame",""],["src","../../../assets/audios/final_game_result.mp3","type","audio/mp3"],[1,"uk-progress",3,"value","max"],[1,"uk-text-white-30"],["uk-icon","star"],["class","uk-alert-danger","uk-alert","",4,"ngIf"],[1,"uk-panel","uk-panel-scrollable"],[1,"uk-list"],["class","uk-margin-left",4,"ngFor","ngForOf"],[1,"uk-button","uk-button-primary","uk-width-1-1",3,"click"],["uk-alert","",1,"uk-alert-danger"],["uk-close","",1,"uk-alert-close"],[1,"uk-margin-left"],["class","uk-text-white-30",4,"ngIf"]],template:function(t,e){1&t&&(l.Mb(0,"div",0),l.Ub("click",(function(t){return e.onClick(t)})),l.Mb(1,"div",1),l.Mb(2,"a",2),l.Kb(3,"span",3),l.gc(4," SAIR"),l.Lb(),l.Lb(),l.Mb(5,"div",4),l.Mb(6,"div"),l.Mb(7,"p",5),l.gc(8),l.Lb(),l.fc(9,f,1,2,"progress",6),l.Lb(),l.fc(10,M,13,4,"div",7),l.Lb(),l.Lb(),l.Mb(11,"div"),l.Mb(12,"audio",null,8),l.Kb(14,"source",9),l.Lb(),l.Mb(15,"audio",null,10),l.Kb(17,"source",11),l.Lb(),l.Mb(18,"audio",12,13),l.Kb(20,"source",14),l.Lb(),l.Lb()),2&t&&(l.zb(2),l.Xb("routerLink",l.ac(4,P)),l.zb(6),l.ic(" ",e.vm.word," "),l.zb(1),l.Xb("ngIf",!e.vm.again),l.zb(1),l.Xb("ngIf",e.vm.again&&0!==e.game.score))},directives:[d.d,m.i,m.h],encapsulation:2}),t})(),data:{animation:"GamePage"}}];let I=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[m.b,d.e.forChild(W)],d.e]}),t})()}}]);